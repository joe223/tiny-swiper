{"version":3,"file":"mousewheel.js","sources":["../../src/core/render/dom.ts","../../src/modules/mousewheel.ts"],"sourcesContent":["export function addClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (!el.classList.contains(clz) && el.classList.add(clz)))\n}\n\nexport function removeClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (el.classList.contains(clz) && el.classList.remove(clz)))\n}\n\nexport function attachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject,\n    opts?: boolean | AddEventListenerOptions\n): void {\n    el.addEventListener(evtName, handler, opts)\n}\n\nexport function detachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject\n): void {\n    el.removeEventListener(evtName, handler)\n}\n\nexport function removeAttr (\n    el: HTMLElement,\n    attr: string\n): void {\n    el.removeAttribute(attr)\n}\n\nexport function setAttr (\n    el: HTMLElement,\n    attr: string,\n    value = ''\n): HTMLElement {\n    el.setAttribute(attr, value)\n    return el\n}\n\nexport function setStyle (\n    el: HTMLElement,\n    style: {[key: string]: string},\n    forceRender?: boolean\n): HTMLElement {\n    Object.keys(style).forEach(prop => {\n        // TS7015: Element implicitly has an 'any' type because index expression is not of type 'number'.\n        el.style[prop as any] = style[prop]\n    })\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    forceRender && getComputedStyle(el)\n\n    return el\n}\n\nexport function getTranslate (\n    el: HTMLElement,\n    isHorizontal: boolean\n): number {\n    const matrix = getComputedStyle(el).transform.replace(/[a-z]|\\(|\\)|\\s/g, '').split(',').map(parseFloat)\n    let arr: Array<number> = []\n\n    if (matrix.length === 16) {\n        arr = matrix.slice(12, 14)\n    } else if (matrix.length === 6) {\n        arr = matrix.slice(4, 6)\n    }\n    return (<Array<number>>arr)[isHorizontal ? 0 : 1] || 0\n}\n","import {\n    attachListener,\n    detachListener\n} from '../core/render/dom'\nimport { SwiperInstance, SwiperPlugin } from '../core/index'\nimport { Options } from '../core/options'\n\nexport type SwiperPluginMousewheelOptions = {\n    invert: boolean\n    sensitivity: number\n    interval: number\n}\n\nexport type SwiperPluginMousewheelPartialOptions = Partial<SwiperPluginMousewheelOptions>\n\nexport type SwiperPluginMousewheelInstance = {\n    $el?: HTMLElement\n}\n\nexport default <SwiperPlugin>function SwiperPluginMousewheel (\n    instance: SwiperInstance & {\n        mousewheel?: SwiperPluginMousewheelInstance\n    },\n    options: Options & {\n        mousewheel?: SwiperPluginMousewheelPartialOptions\n    }\n) {\n    const isEnable = Boolean(options.mousewheel)\n    const mousewheelOptions = <SwiperPluginMousewheelOptions>Object.assign({\n        invert: false,\n        sensitivity: 1,\n        interval: 400\n    }, options.mousewheel)\n    const mousewheelInstance = {\n        $el: null\n    } as unknown as SwiperPluginMousewheelInstance\n    const wheelStatus = {\n        wheeling: false,\n        wheelDelta: 0,\n        wheelingTimer: 0\n    }\n    const handler = (e: WheelEvent) => {\n        const isHorizontal = Math.abs(e.deltaX) > Math.abs(e.deltaY)\n\n        if (options.isHorizontal !== isHorizontal) return\n\n        const delta = isHorizontal\n            ? e.deltaX\n            : e.deltaY\n        const {\n            index\n        } = instance.state\n\n        if ((Math.abs(delta) - Math.abs(wheelStatus.wheelDelta) > 0)\n            && !wheelStatus.wheeling\n            && Math.abs(delta) >= mousewheelOptions.sensitivity\n        ) {\n            const step = mousewheelOptions.invert ? 1 : -1\n\n            instance.slideTo(delta > 0\n                ? index - step\n                : index + step\n            )\n            wheelStatus.wheeling = true\n            wheelStatus.wheelingTimer = setTimeout(() => {\n                wheelStatus.wheeling = false\n            }, mousewheelOptions.interval) as unknown as number\n        }\n        wheelStatus.wheelDelta = delta\n        e.preventDefault()\n        e.stopPropagation()\n    }\n\n    instance.on('after-init', () => {\n        if (!isEnable) return\n\n        const {\n            element\n        } = instance.env\n        const {\n            $el\n        } = element\n\n        mousewheelInstance.$el = $el\n\n        attachListener($el, 'wheel', <EventListener>handler)\n    })\n\n    instance.on('after-destroy', () => {\n        if (!isEnable) return\n\n        detachListener(<HTMLElement>mousewheelInstance.$el, 'wheel', <EventListener>handler)\n\n        delete mousewheelInstance.$el\n    })\n}\n"],"names":["attachListener","el","evtName","handler","opts","addEventListener","detachListener","removeEventListener","SwiperPluginMousewheel","instance","options","isEnable","Boolean","mousewheel","mousewheelOptions","Object","assign","invert","sensitivity","interval","mousewheelInstance","$el","wheelStatus","wheeling","wheelDelta","wheelingTimer","e","isHorizontal","Math","abs","deltaX","deltaY","delta","index","state","step","slideTo","setTimeout","preventDefault","stopPropagation","on","element","env"],"mappings":"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"}